import React, { useState } from "react";
import styled from "styled-components";
import { palette } from "../../assets/styles/Palette";

const WriteSelfCard = () => {
  const [inputText, setInputText] = useState("");
  const [isFocused, setIsFocused] = useState(false);

  const handleInputChange = (e) => {
    setInputText(e.target.value);
  };

  const handleFocus = () => {
    setIsFocused(true);
  };

  const handleBlur = () => {
    setIsFocused(false);
  };

  return (
    <CardContainer hasText={inputText.length > 0}>
      <CardContent>
        {inputText.length === 0 && !isFocused ? (
          <PlaceholderText>ÏßÅÏ†ë ?ëÏÑ±</PlaceholderText>
        ) : (
          <InputField
            value={inputText}
            onChange={handleInputChange}
            onFocus={handleFocus}
            onBlur={handleBlur}
            placeholder=""
            autoFocus={isFocused}
          />
        )}
      </CardContent>
      <IconContainer>
        <PencilIcon>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g>
              <path d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25Z" fill="#8C8C8C"/>
              <path d="M20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z" fill="#8C8C8C"/>
            </g>
          </svg>
        </PencilIcon>
        <LineIcon>
          <svg width="2" height="24" viewBox="0 0 2 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 0V24" stroke={inputText.length > 0 ? "#226FFF" : "#E0E4EB"} strokeWidth="2"/>
          </svg>
        </LineIcon>
      </IconContainer>
    </CardContainer>
  );
};

const CardContainer = styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 820px;
  min-height: 56px;
  padding: 16px 20px;
  background-color: ${palette.white};
  border-radius: 10px;
  border: 1px solid #E0E4EB;
  box-sizing: border-box;
  transition: all 0.2s ease;
`;

const CardContent = styled.div`
  flex: 1;
  display: flex;
  align-items: center;
`;

const PlaceholderText = styled.span`
  font-family: 'Pretendard', sans-serif;
  font-weight: 500;
  font-size: 16px;
  line-height: 1.55;
  letter-spacing: -0.03em;
  color: #CCCCCC;
`;

const InputField = styled.textarea`
  width: 100%;
  font-family: 'Pretendard', sans-serif;
  font-weight: 500;
  font-size: 16px;
  line-height: 1.55;
  letter-spacing: -0.03em;
  color: #323232;
  border: none;
  outline: none;
  resize: none;
  background: transparent;
  padding: 0;
  height: auto;
  min-height: 24px;
  max-height: 120px;
  overflow-y: auto;

  &::placeholder {
    color: #CCCCCC;
  }
`;

const IconContainer = styled.div`
  display: flex;
  align-items: center;
  gap: 12px;
  margin-left: 12px;
`;

const PencilIcon = styled.div`
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
`;

const LineIcon = styled.div`
  width: 2px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
`;

export default WriteSelfCard;
